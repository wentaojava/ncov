<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wentao.ncov.mappers.CityDataMapper">
    <resultMap id="BaseResultMap" type="com.wentao.ncov.entity.mysql.CityData">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        <id column="id" property="id" jdbcType="BIGINT"/>
        <result column="parent_location_Id" property="parentLocationId" jdbcType="INTEGER"/>
        <result column="city_Name" property="cityName" jdbcType="VARCHAR"/>
        <result column="confirmed_Count" property="confirmedCount" jdbcType="VARCHAR"/>
        <result column="suspected_Count" property="suspectedCount" jdbcType="VARCHAR"/>
        <result column="cured_Count" property="curedCount" jdbcType="VARCHAR"/>
        <result column="dead_Count" property="deadCount" jdbcType="VARCHAR"/>
        <result column="location_Id" property="locationId" jdbcType="INTEGER"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
    </resultMap>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        delete from city_data
        where id = #{id,jdbcType=BIGINT}
    </delete>
    <insert id="insert" parameterType="com.wentao.ncov.entity.mysql.CityData">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        <selectKey resultType="java.lang.Long" keyProperty="id" order="AFTER">
            SELECT LAST_INSERT_ID()
        </selectKey>
        insert into city_data (parent_location_Id, city_Name, confirmed_Count,
        suspected_Count, cured_Count, dead_Count,
        location_Id, create_time)
        values (#{parentLocationId,jdbcType=INTEGER}, #{cityName,jdbcType=VARCHAR}, #{confirmedCount,jdbcType=VARCHAR},
        #{suspectedCount,jdbcType=VARCHAR}, #{curedCount,jdbcType=VARCHAR}, #{deadCount,jdbcType=VARCHAR},
        #{locationId,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP})
    </insert>

    <update id="updateByPrimaryKey" parameterType="com.wentao.ncov.entity.mysql.CityData">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        update city_data
        set parent_location_Id = #{parentLocationId,jdbcType=INTEGER},
        city_Name = #{cityName,jdbcType=VARCHAR},
        confirmed_Count = #{confirmedCount,jdbcType=VARCHAR},
        suspected_Count = #{suspectedCount,jdbcType=VARCHAR},
        cured_Count = #{curedCount,jdbcType=VARCHAR},
        dead_Count = #{deadCount,jdbcType=VARCHAR},
        location_Id = #{locationId,jdbcType=INTEGER},
        create_time = #{createTime,jdbcType=TIMESTAMP}
        where id = #{id,jdbcType=BIGINT}
    </update>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        select id, parent_location_Id, city_Name, confirmed_Count, suspected_Count, cured_Count,
        dead_Count, location_Id, create_time
        from city_data
        where id = #{id,jdbcType=BIGINT}
    </select>
    <select id="selectAll" resultMap="BaseResultMap">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Tue Feb 11 16:09:05 CST 2020.
        -->
        select id, parent_location_Id, city_Name, confirmed_Count, suspected_Count, cured_Count,
        dead_Count, location_Id, create_time
        from city_data
    </select>
    <select id="selectDataByLocationIdAndcreateTime" resultType="com.wentao.ncov.entity.mysql.CityData">
        select id, parent_location_Id, city_Name, confirmed_Count, suspected_Count, cured_Count,
        dead_Count, location_Id, create_time
        from city_data where DATE_FORMAT(create_time,'%Y-%m-%d')=DATE_FORMAT(#{date},'%Y-%m-%d') and parent_location_Id
        in
        <foreach collection="list" index="index" item="province" separator="," open="(" close=")">
            #{province.locationId,jdbcType=VARCHAR}
        </foreach>
    </select>

    <insert id="insertAll" parameterType="java.util.List">
        insert into city_data (parent_location_Id, city_Name, confirmed_Count,
        suspected_Count, cured_Count, dead_Count,
        location_Id, create_time)
        values
        <foreach collection="list" index="index" item="cityData" separator=",">
            (#{cityData.parentLocationId,jdbcType=INTEGER},
            #{cityData.cityName,jdbcType=VARCHAR},
            #{cityData.confirmedCount,jdbcType=VARCHAR},
            #{cityData.suspectedCount,jdbcType=VARCHAR},
            #{cityData.curedCount,jdbcType=VARCHAR},
            #{cityData.deadCount,jdbcType=VARCHAR},
            #{cityData.locationId,jdbcType=INTEGER},
            #{cityData.createTime,jdbcType=TIMESTAMP})
        </foreach>
    </insert>
</mapper>
